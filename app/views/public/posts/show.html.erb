<div class="container mt-5">
  <div class="row">
    <!-- 作品詳細 -->
    <div class="col-md-6 offset-md-1">

      <%= render 'info', post: @post %>

      <% if member_signed_in? %>
        <% if @member.id == current_member.id %>
          <%= link_to "編集する", edit_post_path(@post), class: "btn btn-warning text-white" %>
        <% end %>
      <% end %>

      <!-- コメント表示 -->
      <div class="mt-5">
        <h5>コメント (<%= @post.comments.count %>件)</h5>
        <% @post.comments.each do |comment| %>
          <p>
            <%= link_to member_path(comment.member) do %>
              <%= image_tag comment.member.get_profile_image(40, 40), class: "rounded-circle" %>
            <% end %>
            <%= comment.comment %>
            <% if comment.member == current_member %>
              <%= link_to "削除", post_comment_path(comment.post, comment), method: :delete, class: "btn btn-sm btn-danger" %>
            <% end %>
          </p>
        <% end %>
      </div>
      <!-- コメント入力フォーム -->
      <% if member_signed_in? %>
        <div>
          <%= form_with model:[@post, @comment], local: true do |f| %>
            <%= f.text_area :comment, rows: '3', placeholder: "コメントを入力してください", class: "form-control" %>
            <%= f.submit "コメント投稿", class: "btn btn-success mt-3" %>
          <% end %>
        </div>
      <% end %>
    </div>

    <!-- 作者プロフィール -->
    <div class="col-md-4 border border-secondary p-4 h-100 rounded ml-5 mt-5">
      <p>
        <%= image_tag @member.get_profile_image(50, 50), class: "rounded-circle" %>
        <%= link_to member_path(@member) do %>
        <span class="h6"><%= @member.name %></span>
        <% end %>
      </p>
      <p><%= @member.introduction %></p>
      <div class="mb-3">
        <% @posts.each do |post| %>
          <%= link_to member_post_path(post.member, post) do %>
            <%= image_tag post.get_post_image(95, 95) , class: "m-1" %>
          <% end %>
        <% end %>
      </div>
      <%= link_to "もっと見る", members_posts_path(@member) %>
    </div>

  </div>
</div>